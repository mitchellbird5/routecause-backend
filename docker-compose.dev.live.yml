services:
  routecause-backend-dev-live:
    container_name: routecause-backend-dev-live
    image: routecause/backend-dev-live:latest
    build:
      context: .
      dockerfile: Dockerfile.dev
      target: development
    volumes:
      - .:/app:cached
    expose:
      - 5000
    environment:

      ROUTER_URL: https://api.openrouteservice.org/v2/directions/driving-car
      GEOCODE_URL: https://api.openrouteservice.org/geocode
      GEOSNAP_URL: https://api.openrouteservice.org/v2/snap/driving-car
      ORS_API_KEY: ${ORS_API_KEY}

      APP_ENV: production
      POSTGRES_HOST: ${POSTGRES_HOST_LIVE}
      POSTGRES_PORT: ${POSTGRES_PORT_LIVE}
      POSTGRES_USER: ${POSTGRES_USER_LIVE}
      POSTGRES_PASSWORD: ${POSTGRES_PASSWORD_LIVE}
      POSTGRES_DB: ${POSTGRES_DB_LIVE}
      POSTGRES_SSL: true

      FRONTEND_URL: ${FRONTEND_URL}
    networks:
      - routecause-network

volumes:
  node_modules:

networks:
  routecause-network:
    external: true